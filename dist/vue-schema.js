!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.VueSchema=n():t.VueSchema=n()}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=70)}([function(t,n,e){var r=e(12),i=e(55)(r);t.exports=i},function(t,n){var e=Array.isArray;t.exports=e},function(t,n,e){var r=e(8).Symbol;t.exports=r},function(t,n,e){var r=e(10)(Object,"create");t.exports=r},function(t,n,e){var r=e(41);t.exports=function(t,n){for(var e=t.length;e--;)if(r(t[e][0],n))return e;return-1}},function(t,n,e){var r=e(47);t.exports=function(t,n){var e=t.__data__;return r(n)?e["string"==typeof n?"string":"hash"]:e.map}},function(t,n,e){var r=e(7),i=e(9),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,n,e){var r=e(2),i=e(19),o=e(20),c="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:c:s&&s in Object(t)?i(t):o(t)}},function(t,n,e){var r=e(17),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,n,e){var r=e(28),i=e(33);t.exports=function(t,n){var e=i(t,n);return r(e)?e:void 0}},function(t,n){t.exports=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}},function(t,n,e){var r=e(13);t.exports=function(t,n){for(var e=-1,i=n.length,o=Array(i),c=null==t;++e<i;)o[e]=c?void 0:r(t,n[e]);return o}},function(t,n,e){var r=e(14);t.exports=function(t,n,e){var i=null==t?void 0:r(t,n);return void 0===i?e:i}},function(t,n,e){var r=e(15),i=e(54);t.exports=function(t,n){for(var e=0,o=(n=r(n,t)).length;null!=t&&e<o;)t=t[i(n[e++])];return e&&e==o?t:void 0}},function(t,n,e){var r=e(1),i=e(16),o=e(21),c=e(51);t.exports=function(t,n){return r(t)?t:i(t,n)?[t]:o(c(t))}},function(t,n,e){var r=e(1),i=e(6),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;t.exports=function(t,n){if(r(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!i(t))||c.test(t)||!o.test(t)||null!=n&&t in Object(n)}},function(t,n,e){(function(n){var e="object"==typeof n&&n&&n.Object===Object&&n;t.exports=e}).call(this,e(18))},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){var r=e(2),i=Object.prototype,o=i.hasOwnProperty,c=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var n=o.call(t,u),e=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=c.call(t);return r&&(n?t[u]=e:delete t[u]),i}},function(t,n){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},function(t,n,e){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=e(22)(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(r,function(t,e,r,o){n.push(r?o.replace(i,"$1"):e||t)}),n});t.exports=o},function(t,n,e){var r=e(23),i=500;t.exports=function(t){var n=r(t,function(t){return e.size===i&&e.clear(),t}),e=n.cache;return n}},function(t,n,e){var r=e(24),i="Expected a function";function o(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(i);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var c=t.apply(this,r);return e.cache=o.set(i,c)||o,c};return e.cache=new(o.Cache||r),e}o.Cache=r,t.exports=o},function(t,n,e){var r=e(25),i=e(46),o=e(48),c=e(49),u=e(50);function s(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=c,s.prototype.set=u,t.exports=s},function(t,n,e){var r=e(26),i=e(38),o=e(45);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,n,e){var r=e(27),i=e(34),o=e(35),c=e(36),u=e(37);function s(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=c,s.prototype.set=u,t.exports=s},function(t,n,e){var r=e(3);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,n,e){var r=e(29),i=e(30),o=e(11),c=e(32),u=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,f=s.toString,h=a.hasOwnProperty,p=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?p:u).test(c(t))}},function(t,n,e){var r=e(7),i=e(11),o="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var n=r(t);return n==c||n==u||n==o||n==s}},function(t,n,e){var r=e(31),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,n,e){var r=e(8)["__core-js_shared__"];t.exports=r},function(t,n){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,n){t.exports=function(t,n){return null==t?void 0:t[n]}},function(t,n){t.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},function(t,n,e){var r=e(3),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;if(r){var e=n[t];return e===i?void 0:e}return o.call(n,t)?n[t]:void 0}},function(t,n,e){var r=e(3),i=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;return r?void 0!==n[t]:i.call(n,t)}},function(t,n,e){var r=e(3),i="__lodash_hash_undefined__";t.exports=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=r&&void 0===n?i:n,this}},function(t,n,e){var r=e(39),i=e(40),o=e(42),c=e(43),u=e(44);function s(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=c,s.prototype.set=u,t.exports=s},function(t,n){t.exports=function(){this.__data__=[],this.size=0}},function(t,n,e){var r=e(4),i=Array.prototype.splice;t.exports=function(t){var n=this.__data__,e=r(n,t);return!(e<0||(e==n.length-1?n.pop():i.call(n,e,1),--this.size,0))}},function(t,n){t.exports=function(t,n){return t===n||t!=t&&n!=n}},function(t,n,e){var r=e(4);t.exports=function(t){var n=this.__data__,e=r(n,t);return e<0?void 0:n[e][1]}},function(t,n,e){var r=e(4);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,n,e){var r=e(4);t.exports=function(t,n){var e=this.__data__,i=r(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this}},function(t,n,e){var r=e(10)(e(8),"Map");t.exports=r},function(t,n,e){var r=e(5);t.exports=function(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}},function(t,n){t.exports=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}},function(t,n,e){var r=e(5);t.exports=function(t){return r(this,t).get(t)}},function(t,n,e){var r=e(5);t.exports=function(t){return r(this,t).has(t)}},function(t,n,e){var r=e(5);t.exports=function(t,n){var e=r(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this}},function(t,n,e){var r=e(52);t.exports=function(t){return null==t?"":r(t)}},function(t,n,e){var r=e(2),i=e(53),o=e(1),c=e(6),u=1/0,s=r?r.prototype:void 0,a=s?s.toString:void 0;t.exports=function t(n){if("string"==typeof n)return n;if(o(n))return i(n,t)+"";if(c(n))return a?a.call(n):"";var e=n+"";return"0"==e&&1/n==-u?"-0":e}},function(t,n){t.exports=function(t,n){for(var e=-1,r=null==t?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}},function(t,n,e){var r=e(6),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var n=t+"";return"0"==n&&1/t==-i?"-0":n}},function(t,n,e){var r=e(56),i=e(62),o=e(64);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,n,e){var r=e(57);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,n,e){var r=e(58),i=e(59);t.exports=function t(n,e,o,c,u){var s=-1,a=n.length;for(o||(o=i),u||(u=[]);++s<a;){var f=n[s];e>0&&o(f)?e>1?t(f,e-1,o,c,u):r(u,f):c||(u[u.length]=f)}return u}},function(t,n){t.exports=function(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}},function(t,n,e){var r=e(2),i=e(60),o=e(1),c=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(c&&t&&t[c])}},function(t,n,e){var r=e(61),i=e(9),o=Object.prototype,c=o.hasOwnProperty,u=o.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return i(t)&&c.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,n,e){var r=e(7),i=e(9),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,n,e){var r=e(63),i=Math.max;t.exports=function(t,n,e){return n=i(void 0===n?t.length-1:n,0),function(){for(var o=arguments,c=-1,u=i(o.length-n,0),s=Array(u);++c<u;)s[c]=o[n+c];c=-1;for(var a=Array(n+1);++c<n;)a[c]=o[c];return a[n]=e(s),r(t,this,a)}}},function(t,n){t.exports=function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}},function(t,n,e){var r=e(65),i=e(69)(r);t.exports=i},function(t,n,e){var r=e(66),i=e(67),o=e(68),c=i?function(t,n){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(n),writable:!0})}:o;t.exports=c},function(t,n){t.exports=function(t){return function(){return t}}},function(t,n,e){var r=e(10),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,n){t.exports=function(t){return t}},function(t,n){var e=800,r=16,i=Date.now;t.exports=function(t){var n=0,o=0;return function(){var c=i(),u=r-(c-o);if(o=c,u>0){if(++n>=e)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},function(t,n,e){"use strict";e.r(n);var r=e(0),i=e.n(r),o="class,style,attrs,props,domProps,on,nativeOn,directives,scopedSlots,slot,key,ref".split(","),c="tag,bindingAttrs,bindingText,parent,child,children,text,others".split(","),u="tag,text,bindingText,slot,key,ref".split(","),s="class,style,attrs,bindingAttrs,props,domProps,on,nativeOn,directives,scopedSlots,others".split(","),a="directives".split(","),f=function(t){return t.endsWith("s")?t.slice(0,-1):t.endsWith("es")?t.slice(0,-2):t+"-item"},h=function(){function t(n,e){var r=this;!n.tag&&e?this.tag=f(e.tag):this.tag=n.tag,this.parent=e,this.text=n.text,this.others=n.others,o.forEach(function(t){return r[t]=n[t]}),this.attrs=n.attrs||{},this.bindingAttrs=n.bindingAttrs||{},this.bindingText=n.bindingText,Object.keys(n).forEach(function(t){o.includes(t)||c.includes(t)||(":text"===t?r.bindingText=n[t]:":"===t[0]?r.bindingAttrs[t.slice(1)]=n[t]:r.attrs[t]=n[t])});var i=n.children||[];!n.children&&n.child&&("string"==typeof n.child&&(n.child={tag:n.child}),i=[n.child]),this.children=i.map(function(n){return n?new t(n,r):void 0}),this.child=this.children[0]}return t.prototype.merge=function(t){var n=this;u.forEach(function(e){return n[e]=void 0===t[e]?n[e]:t[e]}),s.forEach(function(e){return n[e]=Object.assign({},n[e],t[e])}),a.forEach(function(e){return n[e]=[].concat(n[e]||[],t[e]||[])});for(var e=Math.max(this.children.length,t.children.length),r=0;r<e;r++){var i=this.children[r],o=t.children[r];i&&o?this.children[r]=i.merge(o):!i&&o&&(this.children[r]=o),this.children[r].parent=this}return this.child=this.children&&this.children[0],this},t.prototype.walk=function(t,n){var e=this;t.forEach(function(t){return t(e,n)}),this.children&&this.children.forEach(function(e){return e&&e.walk(t,n)})},t}(),p=function(t,n){return Array.isArray(t)?t.some(function(t){return p(t,n)}):"object"==typeof t?Object.keys(t).every(function(e){return"!"===e[0]?i()(n,e.slice(1))[0]!==t[e]:i()(n,e)[0]===t[e]}):!!t},l=function(){function t(t){var n=this;this.version=t.version;var e=t.model||{};Object.keys(e).forEach(function(t){null===e[t]&&(e[t]=void 0)}),this.model=e,this.uiSchema=t.uiSchema&&new h(t.uiSchema),this._uiRefs=t.uiRefs,this.uiRefs={},this.uiSchema&&this.uiSchema.walk([function(t){return t.ref&&(n.uiRefs[t.ref]=t)}]),this.dependencies=[].concat(t.dependencies||[],t.grayDependencies||[]),this.watchers=t.watchers||[]}return t.prototype.merge=function(t){var n=this;return Object.assign(this.model,t.model),this.dependencies=this.dependencies.concat(t.dependencies),this.watchers=this.watchers.concat(t.watchers),t.uiSchema&&this.uiSchema.merge(t.uiSchema),t._uiRefs&&Object.keys(t._uiRefs).forEach(function(e){var r=t._uiRefs[e];!1===r&&(r={exist:!1},n.dependencies.forEach(function(t,r){return t.$ref===e&&n.dependencies.splice(r,1)})),n.uiRefs[e]?n.uiRefs[e].merge(new h(r)):console.warn("[WARNING] Cannot find '"+e+"' in uiRefs when merging.")}),this.uiSchema&&this.uiSchema.walk([function(t){return t.ref&&(n.uiRefs[t.ref]=t)}]),this},t.prototype.initialize=function(t,n){var e=this;void 0===t&&(t={}),n.model=this.model,t.handlers&&this.uiSchema.walk(t.handlers,n),this.dependencies.forEach(function(t){if(!t.$ref&&!t.$path)return console.warn("依赖没有$ref或$path属性",t);var r;t.depend?r=function(){return p(t.depend,Object.assign({this:n,schema:e,gray:window.backend?window.backend.grayDeploy:{}},n))}:t.if&&(r=function(){return p(t.if.condition,Object.assign({this:n,schema:e,gray:window.backend?window.backend.grayDeploy:{}},n))?t.if.then:t.if.else});var o=t.$path?i()(e.uiSchema,t.$path)[0]:i()(e.uiRefs,t.$ref)[0];if(!o)return console.warn("找不到对应的依赖路径",t);(t.prop||t.attr)&&(o.bindingAttrs[t.prop||t.attr]=r),t.text&&(o.bindingText=r)});var r=[];this.uiSchema.walk([function(t){var e=this;if(void 0===t.attrs.disabled&&(t.attrs.disabled=void 0),void 0===t.attrs.exist&&(t.attrs.exist=void 0),void 0===t.attrs.hidden&&(t.attrs.hidden=void 0),void 0===t.text&&(t.text=void 0),Object.keys(t.bindingAttrs).forEach(function(i){void 0===t.attrs[i]&&(t.attrs[i]=void 0);var o=t.bindingAttrs[i];"string"==typeof o&&(o=Function("schema","gray","with (this) { return "+o+" }").bind(n,e,window.backend?window.backend.grayDeploy:{})),r.push([o,function(n){return t.attrs[i]=n}])}),t.bindingText){var i=t.bindingText;"string"==typeof i&&(i=Function("schema","gray","with (this) { return "+i+" }").bind(n,this,window.backend?window.backend.grayDeploy:{})),console.log(i),r.push([i,function(n){return t.text=n}])}}],n),n.uiSchema=this.uiSchema,n.uiRefs=this.uiRefs,(r=[].concat(t.watchers||[],r,this.watchers)).forEach(function(t){return n.$watch(t[0],t[1],{immediate:!0})})},t}();n.default=l}])});